{% load static %}

<header> 
    <nav class="navbar navbar-expand-lg header-light bg-white header-reverse glass-effect">
        <div class="container-fluid">
            <div class="col-auto col-lg-2 me-lg-0 me-auto">
                <a class="navbar-brand" href="{% url 'frontend:home' %}">
                    <img src="{% static 'frontend/images/logo/logo-color.png' %}" data-at2x="{% static 'frontend/images/logo/logo-color.png' %}" alt="" class="default-logo">
                    <img src="{% static 'frontend/images/logo/logo-color.png' %}" data-at2x="{% static 'frontend/images/logo/logo-color.png' %}" alt="" class="alt-logo">
                    <img src="{% static 'frontend/images/logo/logo-color.png' %}" data-at2x="{% static 'frontend/images/logo/logo-color.png' %}" alt="" class="mobile-logo"> 
                </a>
            </div>
            <div class="col-auto ms-auto md-ms-0 menu-order position-static">
                <button class="navbar-toggler float-start" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-label="Toggle navigation">
                    <span class="navbar-toggler-line"></span>
                    <span class="navbar-toggler-line"></span>
                    <span class="navbar-toggler-line"></span>
                    <span class="navbar-toggler-line"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="navbarNav"> 
                    <ul class="navbar-nav alt-font"> 
                        <li class="nav-item">
                            <a href="{% url 'frontend:home' %}" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item dropdown dropdown-with-icon-style02">
                            <a href="#" class="nav-link">About</a>
                            <i class="fa-solid fa-angle-down dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false"></i>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a href="{% url 'frontend:team' %}">Our Team</a></li>
                                <li><a href="{% url 'frontend:history' %}">Our History</a></li>
                                <li><a href="{% url 'frontend:history' %}">Mission & Vision</a></li>
                                <li><a href="{% url 'frontend:aboutRwanda' %}">About Rwanda</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a href="{% url 'frontend:whatWeDo' %}" class="nav-link">What We Do</a></li>
                        <li class="nav-item"><a href="https://www.oasischristianacademy.org/" target="_blank" class="nav-link">Academy</a></li>
                        <li class="nav-item">
                            <a href="{% url 'frontend:give' %}" class="nav-link">
                                <span style="margin-right: 10px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 14 14"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 2.5h-7v5h7zm-3.5 0v5M8.5.5l1.5 2l1.5-2M.5 11l2.444 2.036a2 2 0 0 0 1.28.463h6.442c.46 0 .834-.373.834-.833c0-.92-.746-1.667-1.667-1.667H5.354"/><path d="m3.5 10l.75.75a1.06 1.06 0 0 0 1.5-1.5L4.586 8.085A2 2 0 0 0 3.17 7.5H.5"/></g></svg>
                                </span>
                                Give
                            </a>
                        </li>
                        <li class="nav-item">
                            <div class="header-cart-icon icon">
                                <div class="header-cart dropdown">
                                    <a href="javascript:void(0);">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 16 16">
                                            <path fill="currentColor" d="M2.5 2a.5.5 0 0 0 0 1h.246a.5.5 0 0 1 .48.363l1.586 5.55A1.5 1.5 0 0 0 6.254 10h4.569a1.5 1.5 0 0 0 1.393-.943l1.474-3.686A1 1 0 0 0 12.762 4H4.448l-.261-.912A1.5 1.5 0 0 0 2.746 2zm3.274 6.637L4.734 5h8.028l-1.475 3.686a.5.5 0 0 1-.464.314H6.254a.5.5 0 0 1-.48-.363M6.5 14a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3m0-1a.5.5 0 1 1 0-1a.5.5 0 0 1 0 1m4 1a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3m0-1a.5.5 0 1 1 0-1a.5.5 0 0 1 0 1"/>
                                        </svg>
                                        <span class="cart-count text-bg-dark alt-font">{{ cart_count }}</span>
                                    </a> 
                                    <ul class="cart-item-list">
                                        {% for item in cart %}
                                            <li class="cart-item align-items-center">
                                                <a href="#" class="alt-font close" onclick="confirmDelete('{{ item.id }}')">Ã—</a>
                                                <div class="product-image">
                                                    <a href="#">
                                                        <img src="{{ item.image_url }}" class="cart-thumb" alt="">
                                                    </a>
                                                </div>
                                                <div class="product-detail alt-font fw-600">
                                                    <a href="#">
                                                        {{ item.title }}
                                                    </a>
                                                    <span class="item-amount fw-500">1 x ${{ item.amount }}</span> 
                                                </div>
                                            </li>
                                        {% endfor %}
                                        <li class="cart-total">
                                            <div class="alt-font mb-15px">
                                                <span class="w-50 fw-500">Subtotal:</span>
                                                <span class="w-50 text-end fw-700">${{ total_amount }}</span>
                                            </div>
                                            <a href="{% url 'frontend:checkout' %}" class="btn btn-large btn-dark-gray btn-box-shadow btn-round-edge">Checkout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-auto text-end d-none d-sm-flex">
                <div class="header-icon"> 
                    <div class="header-button">
                        <a href="{% url 'frontend:donate' %}" class="btn border-1 btn-transparent-light-gray btn-medium left-icon btn-switch-text">
                            <span>
                                <span style="margin-right: 10px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="1.4em" height="1.4em" viewBox="0 0 24 24"><path fill="currentColor" d="M16.004 1.25C18.311 1.25 20 3.128 20 5.75c0 2.292-1.23 4.464-3.295 6.485c-.481.47-.98.909-1.482 1.31l.265 1.32l1.375 7.5a.75.75 0 0 1-.982.844l-3.512-1.207a.75.75 0 0 0-.488 0L8.37 23.209a.75.75 0 0 1-.982-.844l1.378-7.512l.261-1.309c-.5-.4-1-.838-1.481-1.31C5.479 10.215 4.25 8.043 4.25 5.75c0-2.622 1.689-4.5 3.996-4.5c1.55 0 2.947.752 3.832 1.967l.047.067l.047-.067a4.73 4.73 0 0 1 3.612-1.962zM13.89 14.531c-.418.285-.828.542-1.218.77l-.18.103a.75.75 0 0 1-.734 0l-.071-.04l-.46-.272q-.424-.26-.868-.562l-.121.605l-1.145 6.239l2.3-.79a2.25 2.25 0 0 1 1.284-.054l.18.053l2.299.79l-1.141-6.226zM16.004 2.75c-1.464 0-2.731.983-3.159 2.459c-.209.721-1.231.721-1.44 0c-.428-1.476-1.695-2.459-3.16-2.459c-1.44 0-2.495 1.173-2.495 3c0 1.811 1.039 3.647 2.844 5.412a19.6 19.6 0 0 0 3.734 2.84l-.019-.011l-.184-.111l.147-.088a20 20 0 0 0 3.015-2.278l.37-.352C17.46 9.397 18.5 7.561 18.5 5.75c0-1.827-1.055-3-2.496-3"/></svg>
                                </span>
                                <span class="btn-double-text" data-text="Sponsor">Sponsor</span>
                            </span>
                        </a>
                    </div>
                </div>  
            </div>
        </div>
    </nav>
</header>

<script>
    function confirmDelete(itemId) {
        if (confirm('Are you sure you want to remove this item from the cart?')) {
            var csrftoken = '{{ csrf_token }}';

            $.ajax({
                url: '{% url "frontend:remove_from_cart" %}',
                type: 'POST',
                headers: { 'X-CSRFToken': csrftoken },
                data: {
                    'item_id': itemId,
                    csrfmiddlewaretoken: csrftoken
                },
                success: function(response) {
                    console.log(response.message);
                    // Optionally, update the cart display or perform other actions
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                    // Handle errors if needed
                }
            });
        }
    }
</script>